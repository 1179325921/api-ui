<div id="header">
  <div id="header-error" style="display: none;"><b>Error:</b> {{error}}</div>
  <div iv="header-body">
    <label>Operations</label>
    <div id="operations">
      <p>
        <button class="btn btn-primary btn-sm" onclick="htmlapi.up()" {{#unless operations.up}}disabled="disabled"{{/unless}}><i class="glyphicon glyphicon-arrow-up"></i> Up</button>
        <button class="btn btn-primary btn-sm" onclick="htmlapi.reload()"><i class="glyphicon glyphicon-refresh"></i> Reload</button>
      </p>
      {{#if operations.post}}
        <button class="btn btn-primary btn-sm" onclick="htmlapi.create()"><i class="glyphicon glyphicon-plus"></i> Create</button>
      {{/if}}
      {{#if operations.put}}
        <button class="btn btn-primary btn-sm" onclick="htmlapi.update()"><i class="glyphicon glyphicon-edit"></i> Edit</button>
      {{/if}}
      {{#if operations.delete}}
        <button class="btn btn-primary btn-sm" onclick="htmlapi.delete()"><i class="glyphicon glyphicon-trash"></i> Delete</button>
      {{/if}}
    </div>
    <br/>

    <label>Actions</label>
    <form onsubmit="htmlapi.actionLoad($('#action').val(),undefined,{}); return false;">
      <div id="actions">{{! Set based on schema }}</div>
    </form>
    <br/>

    <label>Filter</label>
    <form onsubmit="htmlapi.filterApply(); return false;">
      <div id="filters">{{! Set based on schema/data }}</div>
    </form>
    <br/>

    <label>Sort</label>
    {{#if data.sortLinks }}
      <form>
        <select id="sortBy" onchange="htmlapi.sortChange(this)">
            <option value="">(None)</option>
            {{#eachProperty data.sortLinks}}
              <option value="{{key}}"{{#ifEqual ../../data.sort.name key}} SELECTED{{/ifEqual}}>{{key}}</option>
            {{/eachProperty}}
        </select>
        {{#if data.sort.name }}
          <input type="button" value="{{#ifEqual data.sort.order "desc"}}&uarr;{{else}}&darr;{{/ifEqual}}" onclick="htmlapi.sortOrderChange();"/>
        {{/if}}
      </form>
      <span class="inactive">
        {{#if data.sort.name}}
          {{data.sort.name}}&nbsp;{{#ifEqual data.sort.order "desc"}}&uarr;{{else}}&darr;{{/ifEqual}}
        {{else}}
          Not Sorted
        {{/if}}
      </span>
    {{else}}
      <span class="inactive">Not available</span>
    {{/if}}
    <br/>

    <label>Pagination</label>
    {{#if data.pagination}}
      <div>
        <form>
          <input type="number" min="0" step="100" id="limit" name="limit" style="width: 50px" value="{{data.pagination.limit}}"/>/page
          <input type="submit" value="Set" onclick="htmlapi.setLimit($('limit').val())">
        </form>
      </div>
      <div>
        {{#if data.pagination.partial}}
          {{#if data.pagination.first}}
            {{#ifEqual data.links.self data.pagination.first}}
              {{! Nothing }}
            {{else}}
              <a href="{{data.pagination.first}}">First</a>&nbsp;
            {{/ifEqual}}
          {{/if}}
          {{#if data.pagination.prev}}
            <a href="{{data.pagination.prev}}">Prev</a>&nbsp;
          {{/if}}
          {{#if data.pagination.next}}
            <a href="{{data.pagination.next}}">Next</a>&nbsp;
          {{/if}}
          {{#if data.pagination.last}}
            <a href="{{data.pagination.last}}">Last</a>
          {{/if}}
        {{else}}
          <span class="inactive">Full result</span>
        {{/if}}
      </div>
    {{else}}
      <span class="inactive">Not available</span>
    {{/if}}
    <br/>
  </div>

  <div class="footer">
    {{#if explorer}}
      <a href="#" onclick="Cookie.set('apiview','explorer'); explorer.show(); return false">Explorer View</a><br/>
    {{/if}}
    {{#if docsPage}}
      <a href="{{docsPage}}" target="apidocs">Documentation</a><br/>
    {{/if}}
    {{#if user}}
      <span class="user">{{user}}</span>
    {{/if}}
    {{#if logout}}
      <a href="#" onclick="htmlapi.logout(); return false">Log Out</a>
    {{/if}}
  </div>
</div>

<div id="json" class="json"></div>
